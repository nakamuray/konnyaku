=======================================
konnyaku - ウェブサイト更新チェッカー君
=======================================

概要
====

konnyaku は、 RSS が衰退したこの世界で人間に代わってウェブサイトの更新をチェックしてくれる君です。

ここでは「ウェブサイトの更新」とは「インデックスページに新たなコンテンツページヘのリンクが追加される」ことと定義します。
konnyaku は指定された CSS セレクタにマッチする a タグをページから抜き出し、そこに前回から増えたものがあるかどうかを見ることで、「ウェブサイトの更新」をチェックします。

インストール
============

テキトウに virtualenv を作って、その中にでも入れてください。
``async`` を使っているので python 3.5 が必要です。

.. code:: console

  $ pyvenv-3.5 venv
  $ source ./venv/bin/activate
  $ pip install .

使い方
======

まずはチェックしたいサイトを ``add`` サブコマンドで登録します。
引数には `サイト名`, `URL`, `コンテンツへのリンクを示す CSS セレクタ` を渡します。

.. code:: console

  $ konnyaku add 私のホームページ http://localhost/ ".contents li a"

あとは暇な時に ``check`` サブコマンドを実行して、サイトの更新をチェックします。
前回チェック時から増えたリンクのみが画面に表示されます。


.. code:: console

  $ konnyaku check
  ==============================================================================
  私のホームページ

  第一話:
    http://localhost/contents/1.html
  第二話:
    http://localhost/contents/2.html
  $ : しばらく時間を置いて...
  $ konnyaku check
  ==============================================================================
  私のホームページ

  第三話:
    http://localhost/contents/3.html

TODO
====

- Web UI 追加
- RSS 出力
- a タグの中に画像しか無い上にリンク URL を見てもページ内容が想像出来ないようなサイト対策
- DB マイグレーション
- 文字コード指定付き XML を名乗っているページを lxml に食わせるとエラーになる問題修正
